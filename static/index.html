<script src="https://cdn.jsdelivr.net/npm/@editorjs/editorjs@latest"></script>

<script src="yTitle.js"></script>
<script src="ySection.js"></script>
<script src="yRequirement.js"></script>

<link href="style.css" rel="stylesheet"/>
<link href="ystyle.css" rel="stylesheet"/>

<div id="editorjs" style="max-width: 1000px; margin: 0 auto"></div>

<button id="save-button">Save</button>
<button id="load-button">Load</button>
<pre id="output"></pre>

<script>
  /**
   * Initialize the Editor
   */
  const editor = new EditorJS({
    autofocus: true,
    tools: {
        ytitle: {
            class: yTitle,
        },
        ysection: {
            class: ySection,
        },
        yrequirement: {
            class: yRequirement,
        }
    },
    data: {
        blocks: [
            {
                type: "ytitle",
                data: {
                    id: "SRD1",
                    title: "Sample requirements document1"
                },
            },
            {
                type: "ysection",
                data: {
                    id: "TTL",
                    header: "Title related requirements"
                }
            },
            {
                type: "yrequirement",
                data: {
                    id: "TTL.1",
                    content: "Plugin shall look similar to Word/GDocs Title style"
                },
            },
            {
                type: "yrequirement",
                data: {
                    id: "TTL.2",
                    content: "Only one title should be in the document"
                },
            },
            {
                type: "ysection",
                data: {
                    id: "SEC",
                    header: "Sections related requirements"
                }
            },
            {
                type: "ysection",
                data: {
                    id: "REQ",
                    header: "Requirements related requirements"
                }
            },
        ]
    }
  });

  /**
   * Add handler for the Save button
   */
  const saveButton = document.getElementById('save-button');
  const output = document.getElementById('output');

  saveButton.addEventListener('click', () => {
        editor.save().then( savedData => {
            output.innerHTML = JSON.stringify(savedData, null, 4);
        })
  })
</script>